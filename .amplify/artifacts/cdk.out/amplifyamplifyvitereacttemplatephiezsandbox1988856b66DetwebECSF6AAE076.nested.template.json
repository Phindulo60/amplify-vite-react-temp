{
 "Description": "{\"createdOn\":\"Windows\",\"createdBy\":\"AmplifySandbox\",\"createdWith\":\"1.2.0\",\"stackType\":\"custom\",\"metadata\":{}}",
 "Resources": {
  "EcsTaskRole8DFA0181": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AWSAppSyncInvokeFullAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/EcsTaskRole/Resource"
   }
  },
  "EcsTaskRoleDefaultPolicy50882C77": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CpuAutoProcessorProcessingQueue8311B335",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:ListBucket",
        "s3:GetObject",
        "s3:PutObject"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:s3:::*"
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "GpuAutoProcessorProcessingQueue37A524D4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "EcsTaskRoleDefaultPolicy50882C77",
    "Roles": [
     {
      "Ref": "EcsTaskRole8DFA0181"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/EcsTaskRole/DefaultPolicy/Resource"
   }
  },
  "CpuAutoProcessorProcessingQueue8311B335": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessingQueue/Resource"
   }
  },
  "CpuAutoProcessorProcessorCluster1AA00A80": {
   "Type": "AWS::ECS::Cluster",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorCluster/Resource"
   }
  },
  "CpuAutoProcessorProcessorCluster098C6D72": {
   "Type": "AWS::ECS::ClusterCapacityProviderAssociations",
   "Properties": {
    "CapacityProviders": [
     {
      "Ref": "CpuAutoProcessorAsgCapacityProviderBBEFEE2A"
     }
    ],
    "Cluster": {
     "Ref": "CpuAutoProcessorProcessorCluster1AA00A80"
    },
    "DefaultCapacityProviderStrategy": []
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorCluster/ProcessorCluster"
   }
  },
  "CpuAutoProcessorinstanceSg93DEC970": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/instanceSg",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "VpcId": {
     "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomNestedStackDetwebCustomNestedStackResourceB98792C6Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustommycdkvpc27983103Ref"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/instanceSg/Resource"
   }
  },
  "CpuAutoProcessorProcessorASGInstanceRole36834D64": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ec2.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AWSAppSyncInvokeFullAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorASG"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorASG/InstanceRole/Resource"
   }
  },
  "CpuAutoProcessorProcessorASGInstanceRoleDefaultPolicyB1011CA1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecs:DeregisterContainerInstance",
        "ecs:RegisterContainerInstance",
        "ecs:Submit*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CpuAutoProcessorProcessorCluster1AA00A80",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "ecs:Poll",
        "ecs:StartTelemetrySession"
       ],
       "Condition": {
        "ArnEquals": {
         "ecs:cluster": {
          "Fn::GetAtt": [
           "CpuAutoProcessorProcessorCluster1AA00A80",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecs:DiscoverPollEndpoint",
        "ecr:GetAuthorizationToken",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CpuAutoProcessorProcessorASGInstanceRoleDefaultPolicyB1011CA1",
    "Roles": [
     {
      "Ref": "CpuAutoProcessorProcessorASGInstanceRole36834D64"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorASG/InstanceRole/DefaultPolicy/Resource"
   }
  },
  "CpuAutoProcessorProcessorASGInstanceProfileE1B14764": {
   "Type": "AWS::IAM::InstanceProfile",
   "Properties": {
    "Roles": [
     {
      "Ref": "CpuAutoProcessorProcessorASGInstanceRole36834D64"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorASG/InstanceProfile"
   }
  },
  "CpuAutoProcessorProcessorASGLaunchConfigA3D14D04": {
   "Type": "AWS::AutoScaling::LaunchConfiguration",
   "Properties": {
    "AssociatePublicIpAddress": false,
    "IamInstanceProfile": {
     "Ref": "CpuAutoProcessorProcessorASGInstanceProfileE1B14764"
    },
    "ImageId": {
     "Ref": "SsmParameterValueawsserviceecsoptimizedamiamazonlinux2recommendedimageidC96584B6F00A464EAD1953AFF4B05118Parameter"
    },
    "InstanceType": "t3.small",
    "KeyName": "deploy",
    "SecurityGroups": [
     {
      "Fn::GetAtt": [
       "CpuAutoProcessorinstanceSg93DEC970",
       "GroupId"
      ]
     }
    ],
    "UserData": {
     "Fn::Base64": {
      "Fn::Join": [
       "",
       [
        "#!/bin/bash\necho ECS_CLUSTER=",
        {
         "Ref": "CpuAutoProcessorProcessorCluster1AA00A80"
        },
        " >> /etc/ecs/ecs.config\nsudo iptables --insert FORWARD 1 --in-interface docker+ --destination 169.254.169.254/32 --jump DROP\nsudo service iptables save\necho ECS_AWSVPC_BLOCK_IMDS=true >> /etc/ecs/ecs.config"
       ]
      ]
     }
    }
   },
   "DependsOn": [
    "CpuAutoProcessorProcessorASGInstanceRoleDefaultPolicyB1011CA1",
    "CpuAutoProcessorProcessorASGInstanceRole36834D64"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorASG/LaunchConfig"
   }
  },
  "CpuAutoProcessorProcessorASG9EFA3629": {
   "Type": "AWS::AutoScaling::AutoScalingGroup",
   "Properties": {
    "DesiredCapacity": "0",
    "LaunchConfigurationName": {
     "Ref": "CpuAutoProcessorProcessorASGLaunchConfigA3D14D04"
    },
    "MaxSize": "1",
    "MinSize": "0",
    "NewInstancesProtectedFromScaleIn": true,
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "PropagateAtLaunch": true,
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "PropagateAtLaunch": true,
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "PropagateAtLaunch": true,
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorASG"
     }
    ],
    "VPCZoneIdentifier": [
     {
      "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomNestedStackDetwebCustomNestedStackResourceB98792C6Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustommycdkvpcPublicSubnet1Subnet8B235FA1Ref"
     },
     {
      "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomNestedStackDetwebCustomNestedStackResourceB98792C6Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustommycdkvpcPublicSubnet2SubnetFED573A6Ref"
     }
    ]
   },
   "UpdatePolicy": {
    "AutoScalingScheduledAction": {
     "IgnoreUnmodifiedGroupSizeProperties": true
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorASG/ASG"
   }
  },
  "CpuAutoProcessorAsgCapacityProviderBBEFEE2A": {
   "Type": "AWS::ECS::CapacityProvider",
   "Properties": {
    "AutoScalingGroupProvider": {
     "AutoScalingGroupArn": {
      "Ref": "CpuAutoProcessorProcessorASG9EFA3629"
     },
     "ManagedScaling": {
      "Status": "ENABLED",
      "TargetCapacity": 100
     },
     "ManagedTerminationProtection": "ENABLED"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/AsgCapacityProvider/AsgCapacityProvider"
   }
  },
  "CpuAutoProcessorProcessorTaskDefE31F983A": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Cpu": 1024,
      "Environment": [
       {
        "Name": "QUEUE_URL",
        "Value": {
         "Ref": "CpuAutoProcessorProcessingQueue8311B335"
        }
       },
       {
        "Name": "REGION",
        "Value": {
         "Ref": "AWS::Region"
        }
       },
       {
        "Name": "API_ENDPOINT",
        "Value": {
         "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataNestedStackdataNestedStackResource363753E9Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataamplifyDataGraphQLAPI6B9858ACGraphQLUrl"
        }
       },
       {
        "Name": "API_KEY",
        "Value": {
         "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataNestedStackdataNestedStackResource363753E9Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataamplifyDataGraphQLAPIDefaultApiKeyE28B0CB9ApiKey"
        }
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Sub": "${AWS::AccountId}.dkr.ecr.${AWS::Region}.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}:f9f4ae76a5d2044016180807d18e3f1d416fa6f1a24c0466eeb9ac51d93339bf"
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "CpuAutoProcessorProcessorTaskDefProcessorContainerLogGroupDF1110C0"
        },
        "awslogs-stream-prefix": "processor",
        "awslogs-region": {
         "Ref": "AWS::Region"
        }
       }
      },
      "Memory": 1024,
      "Name": "ProcessorContainer"
     }
    ],
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "CpuAutoProcessorProcessorTaskDefExecutionRole621C6BAE",
      "Arn"
     ]
    },
    "Family": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebECSCpuAutoProcessorProcessorTaskDef23B22937",
    "NetworkMode": "bridge",
    "RequiresCompatibilities": [
     "EC2"
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "EcsTaskRole8DFA0181",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorTaskDef/Resource"
   }
  },
  "CpuAutoProcessorProcessorTaskDefProcessorContainerLogGroupDF1110C0": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorTaskDef/ProcessorContainer/LogGroup/Resource"
   }
  },
  "CpuAutoProcessorProcessorTaskDefExecutionRole621C6BAE": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorTaskDef/ExecutionRole/Resource"
   }
  },
  "CpuAutoProcessorProcessorTaskDefExecutionRoleDefaultPolicy269B0646": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":ecr:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":repository/",
          {
           "Fn::Sub": "cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}"
          }
         ]
        ]
       }
      },
      {
       "Action": "ecr:GetAuthorizationToken",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CpuAutoProcessorProcessorTaskDefProcessorContainerLogGroupDF1110C0",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CpuAutoProcessorProcessorTaskDefExecutionRoleDefaultPolicy269B0646",
    "Roles": [
     {
      "Ref": "CpuAutoProcessorProcessorTaskDefExecutionRole621C6BAE"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorTaskDef/ExecutionRole/DefaultPolicy/Resource"
   }
  },
  "CpuAutoProcessorProcessorService4FA8AEE0": {
   "Type": "AWS::ECS::Service",
   "Properties": {
    "CapacityProviderStrategy": [
     {
      "CapacityProvider": {
       "Ref": "CpuAutoProcessorAsgCapacityProviderBBEFEE2A"
      },
      "Weight": 1
     }
    ],
    "Cluster": {
     "Ref": "CpuAutoProcessorProcessorCluster1AA00A80"
    },
    "DeploymentConfiguration": {
     "Alarms": {
      "AlarmNames": [],
      "Enable": false,
      "Rollback": false
     },
     "MaximumPercent": 200,
     "MinimumHealthyPercent": 50
    },
    "DesiredCount": 0,
    "EnableECSManagedTags": false,
    "SchedulingStrategy": "REPLICA",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "TaskDefinition": {
     "Ref": "CpuAutoProcessorProcessorTaskDefE31F983A"
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorService/Service"
   }
  },
  "CpuAutoProcessorProcessorServiceTaskCountTarget5ADBCA5D": {
   "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
   "Properties": {
    "MaxCapacity": 1,
    "MinCapacity": 0,
    "ResourceId": {
     "Fn::Join": [
      "",
      [
       "service/",
       {
        "Ref": "CpuAutoProcessorProcessorCluster1AA00A80"
       },
       "/",
       {
        "Fn::GetAtt": [
         "CpuAutoProcessorProcessorService4FA8AEE0",
         "Name"
        ]
       }
      ]
     ]
    },
    "RoleARN": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService"
      ]
     ]
    },
    "ScalableDimension": "ecs:service:DesiredCount",
    "ServiceNamespace": "ecs"
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorService/TaskCount/Target/Resource"
   }
  },
  "CpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesLowerPolicy73075AF0": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebECSCpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesLowerPolicyA3E372DA",
    "PolicyType": "StepScaling",
    "ScalingTargetId": {
     "Ref": "CpuAutoProcessorProcessorServiceTaskCountTarget5ADBCA5D"
    },
    "StepScalingPolicyConfiguration": {
     "AdjustmentType": "ChangeInCapacity",
     "MetricAggregationType": "Maximum",
     "StepAdjustments": [
      {
       "MetricIntervalUpperBound": 0,
       "ScalingAdjustment": -1
      }
     ]
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorService/TaskCount/Target/ScaleOnSQSMessages/LowerPolicy/Resource"
   }
  },
  "CpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesLowerAlarm9E3B00DB": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "CpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesLowerPolicy73075AF0"
     }
    ],
    "AlarmDescription": "Lower threshold scaling alarm",
    "ComparisonOperator": "LessThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "CpuAutoProcessorProcessingQueue8311B335",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "Threshold": 0
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorService/TaskCount/Target/ScaleOnSQSMessages/LowerAlarm/Resource"
   }
  },
  "CpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesUpperPolicy2DA6576E": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebECSCpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesUpperPolicy580B8623",
    "PolicyType": "StepScaling",
    "ScalingTargetId": {
     "Ref": "CpuAutoProcessorProcessorServiceTaskCountTarget5ADBCA5D"
    },
    "StepScalingPolicyConfiguration": {
     "AdjustmentType": "ChangeInCapacity",
     "MetricAggregationType": "Maximum",
     "StepAdjustments": [
      {
       "MetricIntervalLowerBound": 0,
       "ScalingAdjustment": 1
      }
     ]
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorService/TaskCount/Target/ScaleOnSQSMessages/UpperPolicy/Resource"
   }
  },
  "CpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesUpperAlarm4AF1472F": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "CpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesUpperPolicy2DA6576E"
     }
    ],
    "AlarmDescription": "Upper threshold scaling alarm",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "CpuAutoProcessorProcessingQueue8311B335",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "Threshold": 1
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CpuAutoProcessor/ProcessorService/TaskCount/Target/ScaleOnSQSMessages/UpperAlarm/Resource"
   }
  },
  "GpuAutoProcessorProcessingQueue37A524D4": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessingQueue/Resource"
   }
  },
  "GpuAutoProcessorProcessorCluster1D7B490B": {
   "Type": "AWS::ECS::Cluster",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorCluster/Resource"
   }
  },
  "GpuAutoProcessorProcessorClusterA1C8E699": {
   "Type": "AWS::ECS::ClusterCapacityProviderAssociations",
   "Properties": {
    "CapacityProviders": [
     {
      "Ref": "GpuAutoProcessorAsgCapacityProviderB46F90B7"
     }
    ],
    "Cluster": {
     "Ref": "GpuAutoProcessorProcessorCluster1D7B490B"
    },
    "DefaultCapacityProviderStrategy": []
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorCluster/ProcessorCluster"
   }
  },
  "GpuAutoProcessorinstanceSgDB32505E": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/instanceSg",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "VpcId": {
     "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomNestedStackDetwebCustomNestedStackResourceB98792C6Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustommycdkvpc27983103Ref"
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/instanceSg/Resource"
   }
  },
  "GpuAutoProcessorProcessorASGInstanceRole65A82CAE": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ec2.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/AWSAppSyncInvokeFullAccess"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorASG"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorASG/InstanceRole/Resource"
   }
  },
  "GpuAutoProcessorProcessorASGInstanceRoleDefaultPolicy41265FFB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecs:DeregisterContainerInstance",
        "ecs:RegisterContainerInstance",
        "ecs:Submit*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "GpuAutoProcessorProcessorCluster1D7B490B",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "ecs:Poll",
        "ecs:StartTelemetrySession"
       ],
       "Condition": {
        "ArnEquals": {
         "ecs:cluster": {
          "Fn::GetAtt": [
           "GpuAutoProcessorProcessorCluster1D7B490B",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "ecs:DiscoverPollEndpoint",
        "ecr:GetAuthorizationToken",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GpuAutoProcessorProcessorASGInstanceRoleDefaultPolicy41265FFB",
    "Roles": [
     {
      "Ref": "GpuAutoProcessorProcessorASGInstanceRole65A82CAE"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorASG/InstanceRole/DefaultPolicy/Resource"
   }
  },
  "GpuAutoProcessorProcessorASGInstanceProfileBD1F1540": {
   "Type": "AWS::IAM::InstanceProfile",
   "Properties": {
    "Roles": [
     {
      "Ref": "GpuAutoProcessorProcessorASGInstanceRole65A82CAE"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorASG/InstanceProfile"
   }
  },
  "GpuAutoProcessorProcessorASGLaunchConfig5083714B": {
   "Type": "AWS::AutoScaling::LaunchConfiguration",
   "Properties": {
    "AssociatePublicIpAddress": false,
    "IamInstanceProfile": {
     "Ref": "GpuAutoProcessorProcessorASGInstanceProfileBD1F1540"
    },
    "ImageId": {
     "Ref": "SsmParameterValueawsserviceecsoptimizedamiamazonlinux2gpurecommendedimageidC96584B6F00A464EAD1953AFF4B05118Parameter"
    },
    "InstanceType": "g4dn.xlarge",
    "KeyName": "deploy",
    "SecurityGroups": [
     {
      "Fn::GetAtt": [
       "GpuAutoProcessorinstanceSgDB32505E",
       "GroupId"
      ]
     }
    ],
    "UserData": {
     "Fn::Base64": {
      "Fn::Join": [
       "",
       [
        "#!/bin/bash\necho ECS_CLUSTER=",
        {
         "Ref": "GpuAutoProcessorProcessorCluster1D7B490B"
        },
        " >> /etc/ecs/ecs.config\nsudo iptables --insert FORWARD 1 --in-interface docker+ --destination 169.254.169.254/32 --jump DROP\nsudo service iptables save\necho ECS_AWSVPC_BLOCK_IMDS=true >> /etc/ecs/ecs.config"
       ]
      ]
     }
    }
   },
   "DependsOn": [
    "GpuAutoProcessorProcessorASGInstanceRoleDefaultPolicy41265FFB",
    "GpuAutoProcessorProcessorASGInstanceRole65A82CAE"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorASG/LaunchConfig"
   }
  },
  "GpuAutoProcessorProcessorASGA0A39719": {
   "Type": "AWS::AutoScaling::AutoScalingGroup",
   "Properties": {
    "DesiredCapacity": "0",
    "LaunchConfigurationName": {
     "Ref": "GpuAutoProcessorProcessorASGLaunchConfig5083714B"
    },
    "MaxSize": "1",
    "MinSize": "0",
    "NewInstancesProtectedFromScaleIn": true,
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "PropagateAtLaunch": true,
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "PropagateAtLaunch": true,
      "Value": "amplify"
     },
     {
      "Key": "Name",
      "PropagateAtLaunch": true,
      "Value": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorASG"
     }
    ],
    "VPCZoneIdentifier": [
     {
      "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomNestedStackDetwebCustomNestedStackResourceB98792C6Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustommycdkvpcPublicSubnet1Subnet8B235FA1Ref"
     },
     {
      "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomNestedStackDetwebCustomNestedStackResourceB98792C6Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustommycdkvpcPublicSubnet2SubnetFED573A6Ref"
     }
    ]
   },
   "UpdatePolicy": {
    "AutoScalingScheduledAction": {
     "IgnoreUnmodifiedGroupSizeProperties": true
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorASG/ASG"
   }
  },
  "GpuAutoProcessorAsgCapacityProviderB46F90B7": {
   "Type": "AWS::ECS::CapacityProvider",
   "Properties": {
    "AutoScalingGroupProvider": {
     "AutoScalingGroupArn": {
      "Ref": "GpuAutoProcessorProcessorASGA0A39719"
     },
     "ManagedScaling": {
      "Status": "ENABLED",
      "TargetCapacity": 100
     },
     "ManagedTerminationProtection": "ENABLED"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/AsgCapacityProvider/AsgCapacityProvider"
   }
  },
  "GpuAutoProcessorProcessorTaskDef41CEF932": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Cpu": 1024,
      "Environment": [
       {
        "Name": "QUEUE_URL",
        "Value": {
         "Ref": "GpuAutoProcessorProcessingQueue37A524D4"
        }
       },
       {
        "Name": "REGION",
        "Value": {
         "Ref": "AWS::Region"
        }
       },
       {
        "Name": "API_ENDPOINT",
        "Value": {
         "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataNestedStackdataNestedStackResource363753E9Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataamplifyDataGraphQLAPI6B9858ACGraphQLUrl"
        }
       },
       {
        "Name": "API_KEY",
        "Value": {
         "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataNestedStackdataNestedStackResource363753E9Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataamplifyDataGraphQLAPIDefaultApiKeyE28B0CB9ApiKey"
        }
       },
       {
        "Name": "BUCKET",
        "Value": {
         "Ref": "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66storageNestedStackstorageNestedStackResource3B7FD3E2Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66storageinputsBucketF67DEBA4Ref"
        }
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Sub": "${AWS::AccountId}.dkr.ecr.${AWS::Region}.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}:ed0c1efd6163cda85e933f52f73f145e863655c00417422a38b26d8bfd201e43"
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "GpuAutoProcessorProcessorTaskDefProcessorContainerLogGroupFE2579A9"
        },
        "awslogs-stream-prefix": "processor",
        "awslogs-region": {
         "Ref": "AWS::Region"
        }
       }
      },
      "Memory": 12288,
      "Name": "ProcessorContainer",
      "ResourceRequirements": [
       {
        "Type": "GPU",
        "Value": "1"
       }
      ]
     }
    ],
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "GpuAutoProcessorProcessorTaskDefExecutionRole37C4B36E",
      "Arn"
     ]
    },
    "Family": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebECSGpuAutoProcessorProcessorTaskDef54F22BAC",
    "NetworkMode": "bridge",
    "RequiresCompatibilities": [
     "EC2"
    ],
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "EcsTaskRole8DFA0181",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorTaskDef/Resource"
   }
  },
  "GpuAutoProcessorProcessorTaskDefProcessorContainerLogGroupFE2579A9": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorTaskDef/ProcessorContainer/LogGroup/Resource"
   }
  },
  "GpuAutoProcessorProcessorTaskDefExecutionRole37C4B36E": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorTaskDef/ExecutionRole/Resource"
   }
  },
  "GpuAutoProcessorProcessorTaskDefExecutionRoleDefaultPolicyC0D862C6": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:GetDownloadUrlForLayer",
        "ecr:BatchGetImage"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":ecr:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":repository/",
          {
           "Fn::Sub": "cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}"
          }
         ]
        ]
       }
      },
      {
       "Action": "ecr:GetAuthorizationToken",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "GpuAutoProcessorProcessorTaskDefProcessorContainerLogGroupFE2579A9",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GpuAutoProcessorProcessorTaskDefExecutionRoleDefaultPolicyC0D862C6",
    "Roles": [
     {
      "Ref": "GpuAutoProcessorProcessorTaskDefExecutionRole37C4B36E"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorTaskDef/ExecutionRole/DefaultPolicy/Resource"
   }
  },
  "GpuAutoProcessorProcessorService6C771925": {
   "Type": "AWS::ECS::Service",
   "Properties": {
    "CapacityProviderStrategy": [
     {
      "CapacityProvider": {
       "Ref": "GpuAutoProcessorAsgCapacityProviderB46F90B7"
      },
      "Weight": 1
     }
    ],
    "Cluster": {
     "Ref": "GpuAutoProcessorProcessorCluster1D7B490B"
    },
    "DeploymentConfiguration": {
     "Alarms": {
      "AlarmNames": [],
      "Enable": false,
      "Rollback": false
     },
     "MaximumPercent": 200,
     "MinimumHealthyPercent": 50
    },
    "DesiredCount": 0,
    "EnableECSManagedTags": false,
    "SchedulingStrategy": "REPLICA",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "TaskDefinition": {
     "Ref": "GpuAutoProcessorProcessorTaskDef41CEF932"
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorService/Service"
   }
  },
  "GpuAutoProcessorProcessorServiceTaskCountTarget83F91C8E": {
   "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
   "Properties": {
    "MaxCapacity": 1,
    "MinCapacity": 0,
    "ResourceId": {
     "Fn::Join": [
      "",
      [
       "service/",
       {
        "Ref": "GpuAutoProcessorProcessorCluster1D7B490B"
       },
       "/",
       {
        "Fn::GetAtt": [
         "GpuAutoProcessorProcessorService6C771925",
         "Name"
        ]
       }
      ]
     ]
    },
    "RoleARN": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService"
      ]
     ]
    },
    "ScalableDimension": "ecs:service:DesiredCount",
    "ServiceNamespace": "ecs"
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorService/TaskCount/Target/Resource"
   }
  },
  "GpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesLowerPolicy20C3768F": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebECSGpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesLowerPolicyBE0854D0",
    "PolicyType": "StepScaling",
    "ScalingTargetId": {
     "Ref": "GpuAutoProcessorProcessorServiceTaskCountTarget83F91C8E"
    },
    "StepScalingPolicyConfiguration": {
     "AdjustmentType": "ChangeInCapacity",
     "MetricAggregationType": "Maximum",
     "StepAdjustments": [
      {
       "MetricIntervalUpperBound": 0,
       "ScalingAdjustment": -1
      }
     ]
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorService/TaskCount/Target/ScaleOnSQSMessages/LowerPolicy/Resource"
   }
  },
  "GpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesLowerAlarm18173366": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "GpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesLowerPolicy20C3768F"
     }
    ],
    "AlarmDescription": "Lower threshold scaling alarm",
    "ComparisonOperator": "LessThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "GpuAutoProcessorProcessingQueue37A524D4",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "Threshold": 0
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorService/TaskCount/Target/ScaleOnSQSMessages/LowerAlarm/Resource"
   }
  },
  "GpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesUpperPolicyA6F5992B": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebECSGpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesUpperPolicy5C6B884B",
    "PolicyType": "StepScaling",
    "ScalingTargetId": {
     "Ref": "GpuAutoProcessorProcessorServiceTaskCountTarget83F91C8E"
    },
    "StepScalingPolicyConfiguration": {
     "AdjustmentType": "ChangeInCapacity",
     "MetricAggregationType": "Maximum",
     "StepAdjustments": [
      {
       "MetricIntervalLowerBound": 0,
       "ScalingAdjustment": 1
      }
     ]
    }
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorService/TaskCount/Target/ScaleOnSQSMessages/UpperPolicy/Resource"
   }
  },
  "GpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesUpperAlarmC67FD4D8": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "GpuAutoProcessorProcessorServiceTaskCountTargetScaleOnSQSMessagesUpperPolicyA6F5992B"
     }
    ],
    "AlarmDescription": "Upper threshold scaling alarm",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "QueueName",
      "Value": {
       "Fn::GetAtt": [
        "GpuAutoProcessorProcessingQueue37A524D4",
        "QueueName"
       ]
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "ApproximateNumberOfMessagesVisible",
    "Namespace": "AWS/SQS",
    "Period": 300,
    "Statistic": "Maximum",
    "Tags": [
     {
      "Key": "amplify:deployment-type",
      "Value": "sandbox"
     },
     {
      "Key": "created-by",
      "Value": "amplify"
     }
    ],
    "Threshold": 1
   },
   "DependsOn": [
    "EcsTaskRoleDefaultPolicy50882C77",
    "EcsTaskRole8DFA0181"
   ],
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/GpuAutoProcessor/ProcessorService/TaskCount/Target/ScaleOnSQSMessages/UpperAlarm/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/2VS0U7jMBD8Ft5dH0TiA3IBISR06jX3jpbNNix1vDmv3aqK8u/IbgttefJ4POud0W5l7+7v7e0N7HSB3Wbh+M1Of0gjdW0E3BjY6evEMNhpJY5Ms/blXIpj3OfrN3r2GsEjLYOs2dFs9L/a6W+iVOoKmA2h2qlxSSOFTP+EDYyAHPfLIFvuKNSqggyRxauptb9+L6XX3CNW/0A3D7Rmz7k0q64Z8RHYUzjjHrFqKWwZi+cTbBEcvDnKHzSSfMw5Kju1hClw3D8FSeOh4IyYDaQoiuDY93aqU5T2cPnSv0Dy+N6IX3OfApyMXktzu/AKqhTVPghuKDwP0FOdmfxmVzSKcpSw/w1KxkmvdnqRs05y+grG0TGWXhf+vkOGnmJJc8m0kcajq+PUz5gaT+YvJLNBJ6nbQcR3O9UOwlACZjDPZkUqKSCZkqSN0LPvy1pBgIGOi/GlypMW35VRzcZLR/ZDf22rW3uXt/hDmRch+cgD2dXh/ASn81Wo4gIAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "amplify-amplifyvitereacttemplate-phiez-sandbox-1988856b66/DetwebECS/CDKMetadata/Default"
   },
   "Condition": "CDKMetadataAvailable"
  }
 },
 "Parameters": {
  "SsmParameterValueawsserviceecsoptimizedamiamazonlinux2recommendedimageidC96584B6F00A464EAD1953AFF4B05118Parameter": {
   "Type": "AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>",
   "Default": "/aws/service/ecs/optimized-ami/amazon-linux-2/recommended/image_id"
  },
  "SsmParameterValueawsserviceecsoptimizedamiamazonlinux2gpurecommendedimageidC96584B6F00A464EAD1953AFF4B05118Parameter": {
   "Type": "AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>",
   "Default": "/aws/service/ecs/optimized-ami/amazon-linux-2/gpu/recommended/image_id"
  },
  "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomNestedStackDetwebCustomNestedStackResourceB98792C6Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustommycdkvpc27983103Ref": {
   "Type": "String"
  },
  "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomNestedStackDetwebCustomNestedStackResourceB98792C6Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustommycdkvpcPublicSubnet1Subnet8B235FA1Ref": {
   "Type": "String"
  },
  "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustomNestedStackDetwebCustomNestedStackResourceB98792C6Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebCustommycdkvpcPublicSubnet2SubnetFED573A6Ref": {
   "Type": "String"
  },
  "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataNestedStackdataNestedStackResource363753E9Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataamplifyDataGraphQLAPI6B9858ACGraphQLUrl": {
   "Type": "String"
  },
  "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataNestedStackdataNestedStackResource363753E9Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66dataamplifyDataGraphQLAPIDefaultApiKeyE28B0CB9ApiKey": {
   "Type": "String"
  },
  "referencetoamplifyamplifyvitereacttemplatephiezsandbox1988856b66storageNestedStackstorageNestedStackResource3B7FD3E2Outputsamplifyamplifyvitereacttemplatephiezsandbox1988856b66storageinputsBucketF67DEBA4Ref": {
   "Type": "String"
  }
 },
 "Conditions": {
  "CDKMetadataAvailable": {
   "Fn::Or": [
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "af-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-3"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-4"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-northwest-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-2"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "il-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "sa-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-1"
       ]
      }
     ]
    },
    {
     "Fn::Equals": [
      {
       "Ref": "AWS::Region"
      },
      "us-west-2"
     ]
    }
   ]
  }
 },
 "Outputs": {
  "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebECSGpuAutoProcessorProcessingQueue807EAB53Ref": {
   "Value": {
    "Ref": "GpuAutoProcessorProcessingQueue37A524D4"
   }
  },
  "amplifyamplifyvitereacttemplatephiezsandbox1988856b66DetwebECSCpuAutoProcessorProcessingQueueECEE3703Ref": {
   "Value": {
    "Ref": "CpuAutoProcessorProcessingQueue8311B335"
   }
  }
 }
}